<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CDU Scheduling Dashboard - Unimed Bauru</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #00A896;
            --primary-dark: #028174;
            --secondary: #87E1D1;
            --background: #0A0F1E;
            --surface: #1A1F2E;
            --text: #FFFFFF;
            --text-muted: #94A3B8;
            --border: #334155;
            --accent: #F97316;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: var(--background);
            color: var(--text);
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            background: var(--surface);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid var(--border);
        }

        .header-logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .header-logo img {
            height: 50px;
            width: auto;
        }

        .header-title h1 {
            font-size: 24px;
            color: var(--secondary);
            margin-bottom: 5px;
        }

        .header-subtitle {
            font-size: 14px;
            color: var(--text-muted);
        }

        .header-slogan {
            font-family: 'Dancing Script', cursive;
            font-size: 20px;
            color: var(--text);
        }

        /* Navigation */
        .nav-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            background: var(--surface);
            padding: 15px;
            border-radius: 12px;
            border: 1px solid var(--border);
        }

        .nav-tab {
            padding: 12px 24px;
            background: transparent;
            color: var(--text-muted);
            border: 1px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .nav-tab:hover {
            background: var(--primary);
            color: var(--text);
            border-color: var(--primary);
        }

        .nav-tab.active {
            background: var(--primary);
            color: var(--text);
            border-color: var(--primary);
        }

        /* Content Area */
        .content-area {
            background: var(--surface);
            padding: 30px;
            border-radius: 12px;
            border: 1px solid var(--border);
            min-height: 400px;
        }

        .content-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border);
        }

        .content-header h2 {
            font-size: 22px;
            color: var(--secondary);
        }

        /* Buttons */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .btn-primary {
            background: var(--primary);
            color: var(--text);
        }

        .btn-primary:hover {
            background: var(--primary-dark);
        }

        .btn-secondary {
            background: transparent;
            color: var(--text-muted);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            background: var(--border);
            color: var(--text);
        }

        /* Cards */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .card {
            background: var(--background);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .card-title {
            font-size: 18px;
            color: var(--secondary);
            margin-bottom: 10px;
            font-weight: 600;
        }

        .card-content {
            color: var(--text-muted);
            font-size: 14px;
            line-height: 1.8;
        }

        .card-content strong {
            color: var(--text);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--surface);
            padding: 30px;
            border-radius: 12px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            border: 1px solid var(--border);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border);
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--text-muted);
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
        }

        .modal-close:hover {
            color: var(--text);
        }

        /* Form */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            color: var(--text);
            font-size: 14px;
            font-weight: 500;
        }

        .form-input,
        .form-textarea,
        .form-select {
            width: 100%;
            padding: 10px 12px;
            background: var(--background);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text);
            font-size: 14px;
        }

        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }

        .form-input:focus,
        .form-textarea:focus,
        .form-select:focus {
            outline: none;
            border-color: var(--primary);
        }

        /* Search */
        .search-box {
            margin-bottom: 20px;
        }

        .search-input {
            width: 100%;
            padding: 12px 15px;
            background: var(--background);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text);
            font-size: 14px;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        /* Footer */
        .footer {
            margin-top: 40px;
            padding: 20px;
            text-align: center;
            color: var(--text-muted);
            font-size: 14px;
        }

        /* Utilities */
        .mb-10 { margin-bottom: 10px; }
        .mb-20 { margin-bottom: 20px; }
        .mt-20 { margin-top: 20px; }
        .text-center { text-align: center; }
        
        .flex {
            display: flex;
            gap: 10px;
        }

        .flex-end {
            justify-content: flex-end;
        }

        .hidden {
            display: none;
        }

        /* Accordion */
        .accordion {
            border: 1px solid var(--border);
            border-radius: 8px;
            margin-bottom: 10px;
            overflow: hidden;
        }

        .accordion-header {
            background: var(--background);
            padding: 15px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.3s ease;
        }

        .accordion-header:hover {
            background: var(--border);
        }

        .accordion-content {
            padding: 15px;
            display: none;
            border-top: 1px solid var(--border);
        }

        .accordion.active .accordion-content {
            display: block;
        }

        .accordion-arrow {
            transition: transform 0.3s ease;
        }

        .accordion.active .accordion-arrow {
            transform: rotate(180deg);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="header-logo">
                <div class="header-title">
                    <h1>Portal CDU</h1>
                    <p class="header-subtitle">Central de Agendamento</p>
                </div>
            </div>
            <div class="header-slogan">
                Juntos pelo melhor atendimento !
            </div>
        </div>

        <!-- Navigation -->
        <div class="nav-tabs" id="navTabs">
            <button class="nav-tab active" onclick="switchTab('dashboard')">üìä Dashboard</button>
            <button class="nav-tab" onclick="switchTab('scripts')">üìù Scripts</button>
            <button class="nav-tab" onclick="switchTab('exames')">üî¨ Exames</button>
            <button class="nav-tab" onclick="switchTab('contatos')">üìû Contatos</button>
            <button class="nav-tab" onclick="switchTab('valores')">üí∞ Valores</button>
            <button class="nav-tab" onclick="switchTab('profissionais')">üë®‚Äç‚öïÔ∏è Profissionais</button>
            <button class="nav-tab" onclick="switchTab('consultorios')">üè• Consult√≥rios</button>
            <button class="nav-tab" onclick="switchTab('configuracoes')">‚öôÔ∏è Configura√ß√µes</button>
        </div>

        <!-- Content Area -->
        <div class="content-area" id="contentArea">
            <!-- Content will be loaded here dynamically -->
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>¬© 2024 Unimed Bauru - Portal CDU | Vers√£o Standalone Offline</p>
        </div>
    </div>

    <!-- Modal Container -->
    <div class="modal" id="modal">
        <div class="modal-content" id="modalContent">
            <!-- Modal content will be loaded here -->
        </div>
    </div>

    <script>
        // Data Storage Manager
        const DataManager = {
            save(key, data) {
                localStorage.setItem('cdu_' + key, JSON.stringify(data));
            },
            load(key, defaultValue = []) {
                const data = localStorage.getItem('cdu_' + key);
                return data ? JSON.parse(data) : defaultValue;
            },
            exportAll() {
                const allData = {
                    scripts: this.load('scripts', []),
                    exames: this.load('exames', []),
                    contatos: this.load('contatos', []),
                    valores: this.load('valores', []),
                    profissionais: this.load('profissionais', []),
                    consultorios: this.load('consultorios', []),
                    userName: this.load('userName', '')
                };
                return JSON.stringify(allData, null, 2);
            },
            importAll(jsonData) {
                try {
                    const data = JSON.parse(jsonData);
                    Object.keys(data).forEach(key => {
                        this.save(key, data[key]);
                    });
                    return true;
                } catch (e) {
                    alert('Erro ao importar dados: ' + e.message);
                    return false;
                }
            }
        };

        // Current state
        let currentTab = 'dashboard';

        // Switch tabs
        function switchTab(tab) {
            currentTab = tab;
            
            // Update active tab
            document.querySelectorAll('.nav-tab').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Render content
            renderContent();
        }

        // Render content based on current tab
        function renderContent() {
            const contentArea = document.getElementById('contentArea');
            
            switch(currentTab) {
                case 'dashboard':
                    renderDashboard();
                    break;
                case 'scripts':
                    renderScripts();
                    break;
                case 'exames':
                    renderExames();
                    break;
                case 'contatos':
                    renderContatos();
                    break;
                case 'valores':
                    renderValores();
                    break;
                case 'profissionais':
                    renderProfissionais();
                    break;
                case 'consultorios':
                    renderConsultorios();
                    break;
                case 'configuracoes':
                    renderConfiguracoes();
                    break;
            }
        }

        // Dashboard
        function renderDashboard() {
            const scripts = DataManager.load('scripts', []);
            const exames = DataManager.load('exames', []);
            const contatos = DataManager.load('contatos', []);
            const profissionais = DataManager.load('profissionais', []);
            
            document.getElementById('contentArea').innerHTML = `
                <div class="content-header">
                    <h2>üìä Dashboard - Vis√£o Geral</h2>
                </div>
                <div class="cards-grid">
                    <div class="card">
                        <div class="card-title">üìù Scripts Cadastrados</div>
                        <div class="card-content">
                            <strong>${scripts.length}</strong> scripts dispon√≠veis
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-title">üî¨ Exames</div>
                        <div class="card-content">
                            <strong>${exames.length}</strong> exames cadastrados
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-title">üìû Contatos</div>
                        <div class="card-content">
                            <strong>${contatos.length}</strong> contatos salvos
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-title">üë®‚Äç‚öïÔ∏è Profissionais</div>
                        <div class="card-content">
                            <strong>${profissionais.length}</strong> profissionais cadastrados
                        </div>
                    </div>
                </div>
                <div class="mt-20">
                    <h3 class="mb-20" style="color: var(--secondary);">Bem-vindo ao Portal CDU</h3>
                    <p style="color: var(--text-muted); line-height: 1.8;">
                        Este √© o portal de agendamento CDU da Unimed Bauru. Aqui voc√™ pode consultar scripts, 
                        informa√ß√µes sobre exames, contatos importantes, valores de procedimentos e muito mais.
                        <br><br>
                        <strong style="color: var(--text);">Vers√£o Standalone Offline:</strong> Esta vers√£o funciona completamente offline. 
                        Todos os dados s√£o salvos localmente no navegador desta m√°quina.
                    </p>
                </div>
            `;
        }

        // Scripts
        function renderScripts() {
            const scripts = DataManager.load('scripts', []);
            
            let html = `
                <div class="content-header">
                    <h2>üìù Scripts de Atendimento</h2>
                    <button class="btn btn-primary" onclick="addScript()">+ Novo Script</button>
                </div>
                <div class="search-box">
                    <input type="text" class="search-input" placeholder="üîç Pesquisar scripts..." 
                           onkeyup="filterItems('scripts', this.value)">
                </div>
                <div id="scriptsList" class="cards-grid">
            `;
            
            scripts.forEach((script, index) => {
                html += `
                    <div class="card script-item">
                        <div class="card-title">${script.title || 'Script ' + (index + 1)}</div>
                        <div class="card-content">
                            ${script.content ? script.content.substring(0, 150) + '...' : 'Sem conte√∫do'}
                        </div>
                        <div class="flex flex-end mt-20">
                            <button class="btn btn-secondary" onclick="viewScript(${index})">Ver</button>
                            <button class="btn btn-secondary" onclick="editScript(${index})">Editar</button>
                            <button class="btn btn-secondary" onclick="deleteScript(${index})">Excluir</button>
                        </div>
                    </div>
                `;
            });
            
            html += `</div>`;
            document.getElementById('contentArea').innerHTML = html;
        }

        function addScript() {
            showModal('Novo Script', `
                <form onsubmit="saveScript(event)">
                    <div class="form-group">
                        <label class="form-label">T√≠tulo</label>
                        <input type="text" class="form-input" name="title" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Conte√∫do</label>
                        <textarea class="form-textarea" name="content" rows="10" required></textarea>
                    </div>
                    <div class="flex flex-end">
                        <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancelar</button>
                        <button type="submit" class="btn btn-primary">Salvar</button>
                    </div>
                </form>
            `);
        }

        function saveScript(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const scripts = DataManager.load('scripts', []);
            
            scripts.push({
                title: formData.get('title'),
                content: formData.get('content'),
                createdAt: new Date().toISOString()
            });
            
            DataManager.save('scripts', scripts);
            closeModal();
            renderScripts();
        }

        function viewScript(index) {
            const scripts = DataManager.load('scripts', []);
            const script = scripts[index];
            
            showModal(script.title, `
                <div style="white-space: pre-wrap; color: var(--text-muted); line-height: 1.8;">
                    ${script.content}
                </div>
                <div class="flex flex-end mt-20">
                    <button class="btn btn-secondary" onclick="copyToClipboard(\`${script.content.replace(/`/g, '\\`')}\`)">üìã Copiar</button>
                    <button class="btn btn-primary" onclick="closeModal()">Fechar</button>
                </div>
            `);
        }

        function editScript(index) {
            const scripts = DataManager.load('scripts', []);
            const script = scripts[index];
            
            showModal('Editar Script', `
                <form onsubmit="updateScript(event, ${index})">
                    <div class="form-group">
                        <label class="form-label">T√≠tulo</label>
                        <input type="text" class="form-input" name="title" value="${script.title}" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Conte√∫do</label>
                        <textarea class="form-textarea" name="content" rows="10" required>${script.content}</textarea>
                    </div>
                    <div class="flex flex-end">
                        <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancelar</button>
                        <button type="submit" class="btn btn-primary">Salvar</button>
                    </div>
                </form>
            `);
        }

        function updateScript(event, index) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const scripts = DataManager.load('scripts', []);
            
            scripts[index] = {
                ...scripts[index],
                title: formData.get('title'),
                content: formData.get('content'),
                updatedAt: new Date().toISOString()
            };
            
            DataManager.save('scripts', scripts);
            closeModal();
            renderScripts();
        }

        function deleteScript(index) {
            if (confirm('Tem certeza que deseja excluir este script?')) {
                const scripts = DataManager.load('scripts', []);
                scripts.splice(index, 1);
                DataManager.save('scripts', scripts);
                renderScripts();
            }
        }

        // Exames
        function renderExames() {
            const exames = DataManager.load('exames', []);
            
            let html = `
                <div class="content-header">
                    <h2>üî¨ Exames e Procedimentos</h2>
                    <button class="btn btn-primary" onclick="addExame()">+ Novo Exame</button>
                </div>
                <div class="search-box">
                    <input type="text" class="search-input" placeholder="üîç Pesquisar exames..." 
                           onkeyup="filterItems('exame', this.value)">
                </div>
                <div id="examesList" class="cards-grid">
            `;
            
            exames.forEach((exame, index) => {
                html += `
                    <div class="card exame-item">
                        <div class="card-title">${exame.name || 'Exame ' + (index + 1)}</div>
                        <div class="card-content">
                            <strong>Local:</strong> ${exame.location || 'N√£o especificado'}<br>
                            <strong>Ramal:</strong> ${exame.extension || 'N/A'}<br>
                            ${exame.notes ? '<br>' + exame.notes.substring(0, 100) + '...' : ''}
                        </div>
                        <div class="flex flex-end mt-20">
                            <button class="btn btn-secondary" onclick="viewExame(${index})">Ver</button>
                            <button class="btn btn-secondary" onclick="editExame(${index})">Editar</button>
                            <button class="btn btn-secondary" onclick="deleteExame(${index})">Excluir</button>
                        </div>
                    </div>
                `;
            });
            
            html += `</div>`;
            document.getElementById('contentArea').innerHTML = html;
        }

        function addExame() {
            showModal('Novo Exame', `
                <form onsubmit="saveExame(event)">
                    <div class="form-group">
                        <label class="form-label">Nome do Exame</label>
                        <input type="text" class="form-input" name="name" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Local</label>
                        <input type="text" class="form-input" name="location">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Ramal</label>
                        <input type="text" class="form-input" name="extension">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Observa√ß√µes</label>
                        <textarea class="form-textarea" name="notes" rows="5"></textarea>
                    </div>
                    <div class="flex flex-end">
                        <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancelar</button>
                        <button type="submit" class="btn btn-primary">Salvar</button>
                    </div>
                </form>
            `);
        }

        function saveExame(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const exames = DataManager.load('exames', []);
            
            exames.push({
                name: formData.get('name'),
                location: formData.get('location'),
                extension: formData.get('extension'),
                notes: formData.get('notes'),
                createdAt: new Date().toISOString()
            });
            
            DataManager.save('exames', exames);
            closeModal();
            renderExames();
        }

        function viewExame(index) {
            const exames = DataManager.load('exames', []);
            const exame = exames[index];
            
            showModal(exame.name, `
                <div style="color: var(--text-muted); line-height: 1.8;">
                    <p><strong style="color: var(--text);">Local:</strong> ${exame.location || 'N√£o especificado'}</p>
                    <p><strong style="color: var(--text);">Ramal:</strong> ${exame.extension || 'N/A'}</p>
                    ${exame.notes ? '<p class="mt-20"><strong style="color: var(--text);">Observa√ß√µes:</strong><br>' + exame.notes + '</p>' : ''}
                </div>
                <div class="flex flex-end mt-20">
                    <button class="btn btn-primary" onclick="closeModal()">Fechar</button>
                </div>
            `);
        }

        function editExame(index) {
            const exames = DataManager.load('exames', []);
            const exame = exames[index];
            
            showModal('Editar Exame', `
                <form onsubmit="updateExame(event, ${index})">
                    <div class="form-group">
                        <label class="form-label">Nome do Exame</label>
                        <input type="text" class="form-input" name="name" value="${exame.name}" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Local</label>
                        <input type="text" class="form-input" name="location" value="${exame.location || ''}">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Ramal</label>
                        <input type="text" class="form-input" name="extension" value="${exame.extension || ''}">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Observa√ß√µes</label>
                        <textarea class="form-textarea" name="notes" rows="5">${exame.notes || ''}</textarea>
                    </div>
                    <div class="flex flex-end">
                        <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancelar</button>
                        <button type="submit" class="btn btn-primary">Salvar</button>
                    </div>
                </form>
            `);
        }

        function updateExame(event, index) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const exames = DataManager.load('exames', []);
            
            exames[index] = {
                ...exames[index],
                name: formData.get('name'),
                location: formData.get('location'),
                extension: formData.get('extension'),
                notes: formData.get('notes'),
                updatedAt: new Date().toISOString()
            };
            
            DataManager.save('exames', exames);
            closeModal();
            renderExames();
        }

        function deleteExame(index) {
            if (confirm('Tem certeza que deseja excluir este exame?')) {
                const exames = DataManager.load('exames', []);
                exames.splice(index, 1);
                DataManager.save('exames', exames);
                renderExames();
            }
        }

        // Contatos
        function renderContatos() {
            const contatos = DataManager.load('contatos', []);
            
            let html = `
                <div class="content-header">
                    <h2>üìû Contatos</h2>
                    <button class="btn btn-primary" onclick="addContato()">+ Novo Contato</button>
                </div>
                <div class="search-box">
                    <input type="text" class="search-input" placeholder="üîç Pesquisar contatos..." 
                           onkeyup="filterItems('contato', this.value)">
                </div>
                <div id="contatosList" class="cards-grid">
            `;
            
            contatos.forEach((contato, index) => {
                html += `
                    <div class="card contato-item">
                        <div class="card-title">${contato.name || 'Contato ' + (index + 1)}</div>
                        <div class="card-content">
                            ${contato.phone ? '<strong>üìû</strong> ' + contato.phone + '<br>' : ''}
                            ${contato.whatsapp ? '<strong>üí¨</strong> ' + contato.whatsapp + '<br>' : ''}
                            ${contato.email ? '<strong>üìß</strong> ' + contato.email + '<br>' : ''}
                            ${contato.sector ? '<strong>Setor:</strong> ' + contato.sector : ''}
                        </div>
                        <div class="flex flex-end mt-20">
                            <button class="btn btn-secondary" onclick="editContato(${index})">Editar</button>
                            <button class="btn btn-secondary" onclick="deleteContato(${index})">Excluir</button>
                        </div>
                    </div>
                `;
            });
            
            html += `</div>`;
            document.getElementById('contentArea').innerHTML = html;
        }

        function addContato() {
            showModal('Novo Contato', `
                <form onsubmit="saveContato(event)">
                    <div class="form-group">
                        <label class="form-label">Nome</label>
                        <input type="text" class="form-input" name="name" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Setor</label>
                        <input type="text" class="form-input" name="sector">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Telefone</label>
                        <input type="tel" class="form-input" name="phone">
                    </div>
                    <div class="form-group">
                        <label class="form-label">WhatsApp</label>
                        <input type="tel" class="form-input" name="whatsapp">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-input" name="email">
                    </div>
                    <div class="flex flex-end">
                        <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancelar</button>
                        <button type="submit" class="btn btn-primary">Salvar</button>
                    </div>
                </form>
            `);
        }

        function saveContato(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const contatos = DataManager.load('contatos', []);
            
            contatos.push({
                name: formData.get('name'),
                sector: formData.get('sector'),
                phone: formData.get('phone'),
                whatsapp: formData.get('whatsapp'),
                email: formData.get('email'),
                createdAt: new Date().toISOString()
            });
            
            DataManager.save('contatos', contatos);
            closeModal();
            renderContatos();
        }

        function editContato(index) {
            const contatos = DataManager.load('contatos', []);
            const contato = contatos[index];
            
            showModal('Editar Contato', `
                <form onsubmit="updateContato(event, ${index})">
                    <div class="form-group">
                        <label class="form-label">Nome</label>
                        <input type="text" class="form-input" name="name" value="${contato.name}" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Setor</label>
                        <input type="text" class="form-input" name="sector" value="${contato.sector || ''}">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Telefone</label>
                        <input type="tel" class="form-input" name="phone" value="${contato.phone || ''}">
                    </div>
                    <div class="form-group">
                        <label class="form-label">WhatsApp</label>
                        <input type="tel" class="form-input" name="whatsapp" value="${contato.whatsapp || ''}">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-input" name="email" value="${contato.email || ''}">
                    </div>
                    <div class="flex flex-end">
                        <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancelar</button>
                        <button type="submit" class="btn btn-primary">Salvar</button>
                    </div>
                </form>
            `);
        }

        function updateContato(event, index) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const contatos = DataManager.load('contatos', []);
            
            contatos[index] = {
                ...contatos[index],
                name: formData.get('name'),
                sector: formData.get('sector'),
                phone: formData.get('phone'),
                whatsapp: formData.get('whatsapp'),
                email: formData.get('email'),
                updatedAt: new Date().toISOString()
            };
            
            DataManager.save('contatos', contatos);
            closeModal();
            renderContatos();
        }

        function deleteContato(index) {
            if (confirm('Tem certeza que deseja excluir este contato?')) {
                const contatos = DataManager.load('contatos', []);
                contatos.splice(index, 1);
                DataManager.save('contatos', contatos);
                renderContatos();
            }
        }

        // Valores (simplified version)
        function renderValores() {
            document.getElementById('contentArea').innerHTML = `
                <div class="content-header">
                    <h2>üí∞ Tabela de Valores</h2>
                </div>
                <p style="color: var(--text-muted);">Esta se√ß√£o pode ser customizada para incluir tabelas de valores de procedimentos.</p>
            `;
        }

        // Profissionais (simplified version)
        function renderProfissionais() {
            document.getElementById('contentArea').innerHTML = `
                <div class="content-header">
                    <h2>üë®‚Äç‚öïÔ∏è Profissionais</h2>
                </div>
                <p style="color: var(--text-muted);">Esta se√ß√£o pode ser customizada para incluir informa√ß√µes sobre profissionais.</p>
            `;
        }

        // Consult√≥rios (simplified version)
        function renderConsultorios() {
            document.getElementById('contentArea').innerHTML = `
                <div class="content-header">
                    <h2>üè• Consult√≥rios</h2>
                </div>
                <p style="color: var(--text-muted);">Esta se√ß√£o pode ser customizada para incluir informa√ß√µes sobre consult√≥rios.</p>
            `;
        }

        // Configura√ß√µes
        function renderConfiguracoes() {
            const userName = DataManager.load('userName', '');
            
            document.getElementById('contentArea').innerHTML = `
                <div class="content-header">
                    <h2>‚öôÔ∏è Configura√ß√µes</h2>
                </div>
                
                <div class="card mb-20">
                    <div class="card-title">üë§ Nome do Usu√°rio</div>
                    <div class="card-content">
                        <form onsubmit="saveUserName(event)" class="mt-20">
                            <div class="form-group">
                                <input type="text" class="form-input" name="userName" 
                                       value="${userName}" placeholder="Digite seu nome">
                            </div>
                            <button type="submit" class="btn btn-primary">Salvar Nome</button>
                        </form>
                    </div>
                </div>

                <div class="card mb-20">
                    <div class="card-title">üíæ Backup e Importa√ß√£o</div>
                    <div class="card-content mt-20">
                        <div class="flex">
                            <button class="btn btn-primary" onclick="exportData()">üì§ Exportar Dados</button>
                            <button class="btn btn-secondary" onclick="importData()">üì• Importar Dados</button>
                        </div>
                        <p class="mt-20" style="color: var(--text-muted); font-size: 13px;">
                            Exporte seus dados para fazer backup ou transferir para outra m√°quina.
                        </p>
                    </div>
                </div>

                <div class="card">
                    <div class="card-title">üóëÔ∏è Limpar Dados</div>
                    <div class="card-content mt-20">
                        <button class="btn btn-secondary" onclick="clearAllData()">Limpar Todos os Dados</button>
                        <p class="mt-20" style="color: var(--text-muted); font-size: 13px;">
                            ‚ö†Ô∏è Esta a√ß√£o n√£o pode ser desfeita. Fa√ßa um backup antes de limpar.
                        </p>
                    </div>
                </div>
            `;
        }

        function saveUserName(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const userName = formData.get('userName');
            DataManager.save('userName', userName);
            alert('Nome salvo com sucesso!');
        }

        function exportData() {
            const data = DataManager.exportAll();
            const blob = new Blob([data], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'portal-cdu-backup-' + new Date().toISOString().split('T')[0] + '.json';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            alert('Dados exportados com sucesso!');
        }

        function importData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        if (DataManager.importAll(event.target.result)) {
                            alert('Dados importados com sucesso!');
                            renderContent();
                        }
                    };
                    reader.readAsText(file);
                }
            };
            input.click();
        }

        function clearAllData() {
            if (confirm('‚ö†Ô∏è ATEN√á√ÉO! Isso vai apagar TODOS os dados salvos. Tem certeza?')) {
                if (confirm('Tem ABSOLUTA certeza? Esta a√ß√£o n√£o pode ser desfeita!')) {
                    localStorage.clear();
                    alert('Todos os dados foram apagados.');
                    renderContent();
                }
            }
        }

        // Modal functions
        function showModal(title, content) {
            document.getElementById('modalContent').innerHTML = `
                <div class="modal-header">
                    <h2 style="color: var(--secondary);">${title}</h2>
                    <button class="modal-close" onclick="closeModal()">√ó</button>
                </div>
                ${content}
            `;
            document.getElementById('modal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('modal').classList.remove('active');
        }

        // Close modal when clicking outside
        document.getElementById('modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        // Filter items
        function filterItems(type, searchTerm) {
            const items = document.querySelectorAll('.' + type + '-item');
            searchTerm = searchTerm.toLowerCase();
            
            items.forEach(item => {
                const text = item.textContent.toLowerCase();
                if (text.includes(searchTerm)) {
                    item.style.display = '';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        // Copy to clipboard
        function copyToClipboard(text) {
            const textarea = document.createElement('textarea');
            textarea.value = text;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);
            alert('Copiado para a √°rea de transfer√™ncia!');
        }

        // Initialize
        renderDashboard();
    </script>
</body>
</html>